<% content_for :title, "Posts" %>

<h1 class="text-4xl font-bold mb-8">Posts</h1>

<% if notice.present? %>
  <p class="text-green-600 mb-4"><%= notice %></p>
<% end %>

<% if request.authorization.present? %>
  <%= link_to "New post", new_post_path,
    class: "inline-block mb-8 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition" %>
<% end %>

<div class="space-y-12">
  <% @posts.each do |post| %>
    <article class="prose prose-gray max-w-none bg-white p-6 rounded-lg shadow">
      <h2 class="text-2xl font-semibold">
        <%= link_to post.title, post, class: "hover:underline" %>
      </h2>
      <p class="text-sm text-gray-500">
        Posted <%= time_ago_in_words(post.created_at) %> ago
      </p>
      <p>
        <%= truncate(post.body, length: 200) %>
      </p>

      <p>
        <%= link_to "Read more", post, class: "text-blue-600 hover:underline" %>
        <% if request.authorization.present? %>
          &middot; <%= link_to "Edit", edit_post_path(post), class: "text-yellow-600 hover:underline" %>
          &middot; <%= link_to "Delete", post, method: :delete,
            data: { confirm: "Are you sure?" },
            class: "text-red-600 hover:underline" %>
        <% end %>
      </p>
    </article>
  <% end %>
</div>
