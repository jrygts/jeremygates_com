<% content_for :title, "Posts" %>

<h1 class="text-4xl font-bold text-blue-600 mb-6">Posts</h1>

<% if notice.present? %>
  <p class="text-green-600 mb-4"><%= notice %></p>
<% end %>

<% if request.authorization.present? %>
  <%= link_to "New post", new_post_path, class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition inline-block mb-6" %>
<% end %>

<div class="space-y-6">
  <% @posts.each do |post| %>
    <div class="bg-white shadow rounded-lg p-6">
      <h2 class="text-2xl font-semibold text-gray-900 mb-2">
        <%= link_to post.title, post, class: "hover:underline" %>
      </h2>
      <p class="text-sm text-gray-500 mb-4">
        Posted <%= time_ago_in_words(post.created_at) %> ago
      </p>
      <p class="text-gray-700 mb-4"><%= truncate(post.body, length: 200) %></p>

      <div class="space-x-4">
        <%= link_to "Read more", post, class: "text-blue-600 hover:underline text-sm" %>
        <% if request.authorization.present? %>
          <%= link_to "Edit", edit_post_path(post), class: "text-yellow-600 hover:underline text-sm" %>
          <%= link_to "Delete", post, method: :delete, data: { confirm: "Are you sure?" }, class: "text-red-600 hover:underline text-sm" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
